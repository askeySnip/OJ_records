<html><body bgcolor="#000000" text="#ffffff"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><p>
Elly signed up for a table tennis tournament.
There are <b>N</b> participants in the tournament, including her.
Each participant has an ELO rating (i.e., a number approximating how good he or she is).
For the purpose of this task we will assume that if two players with ELO ratings X and Y play against each other, the first player will win with probability X / (X + Y) and the second player will win with probability Y / (X + Y).
</p>

<p>
The tournament is played in rounds. In the beginning all participants sit in a single row. In each round two players <i>sitting next to each other</i> are chosen uniformly at random. The chosen players play a game. The loser of the game is eliminated from the tournament. (The players who were the loser's neighbors in the old row are now each other's neighbors in the new row.) After playing <b>N</b>-1 rounds (each consisting of a single game) a single person will remain. This person is the winner of the tournament.
</p>

<p>
It is the beginning of the tournament.
The vector &lt;int&gt; <b>ratings</b> contains the ratings of the players in the order in which they currently sit in the row.
The int <b>K</b> is Elly's (1-based) position in the row.
Compute and return the probability that Elly will win the tournament.
</p></td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>EllysTournament</td></tr><tr><td>Method:</td><td>getChance</td></tr><tr><td>Parameters:</td><td>int, int, vector &lt;int&gt;</td></tr><tr><td>Returns:</td><td>double</td></tr><tr><td>Method signature:</td><td>double getChance(int N, int K, vector &lt;int&gt; ratings)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>2.000</td></tr><tr><td>Memory limit (MB):</td><td>256</td></tr></table></td></tr><tr><td colspan="2"><h3>Notes</h3></td></tr><tr><td align="center" valign="top">-</td><td>Your return value must have an absolute or a relative error at most 1e-9.</td></tr><tr><td align="center" valign="top">-</td><td>All random events in the tournament are mutually independent.</td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td><b>N</b> will be between 1 and 500, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>K</b> will be between 1 and <b>N</b>, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>ratings</b> will contain exactly <b>N</b> elements.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>ratings</b> will be between 1 and 3000, inclusive.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>4</pre></td></tr><tr><td><pre>2</pre></td></tr><tr><td><pre>{2103, 2019, 1911, 2331}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.17753927527829697</pre></td></tr><tr><td><table><tr><td colspan="2">There are four people enlisted for the tournament. Ellys is the second from the left.
In order to win, she has to beat the opponent standing to the left of her (because there is nobody else to the left that can beat him), which happens with chance 2019 / (2019 + 2103) = 0.489810771470.
There are three possible options for the remaining two opponents:
<ol>
<li>Elly beats both. This happens with chance 2019/(2019 + 1911) = 0.513740458015 for the first one and then 2019/(2019+2331) = 0.464137931034 for the second, for a total of 0.513740458015 * 0.464137931034 = 0.238446433272.</li>
<li>The lower rated opponent can beat the higher rated one, and then Elly can beat him. This happens with chance 1911/(1911+2331) = 0.450495049505 for the lower rated to beat the higher rated and then 2019/(2019+1911) = 0.513740458015 for Elly to beat him for a total of 0.450495049505 * 0.513740458015 = 0.231437533066.</li>
<li>The higher rated opponent can beat the lower rated one, and then Elly can beat him. This happens with chance 2331/(1911+2331) = 0.549504950495 for the higher rated to beat the lower rated and then 2019/(2019+2331) = 0.464137931034 for Elly to beat him for a total of 0.549504950495 * 0.464137931034 = 0.255046090816.</li>
</ol>
Please note that (ignoring the match against the player to the left), either the first match is between the two opponents to the right (covering cases 2 and 3) or the first match is with Elly and the one with rating 1911. Thus, the total chance for Elly to win the tournament is:<br></br>
0.489810771470 (to beat the player to the left) *<br></br>
(<br></br>
 1/2 * 0.238446433272 (to beat both players to the right)<br></br>
 +<br></br>
 1/2 * (0.231437533066 + 0.255046090816) (to beat only one of the players to the right)<br></br>
)<br></br>
The result here is 0.489810771470 * (0.5 * 0.238446433272 + 0.5 * (0.231437533066 + 0.255046090816)) = 0.177539275278.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>12</pre></td></tr><tr><td><pre>6</pre></td></tr><tr><td><pre>{42, 88, 13, 11, 71, 55, 32, 13, 72, 53, 37, 50}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.06697114679670368</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>20</pre></td></tr><tr><td><pre>13</pre></td></tr><tr><td><pre>{1543, 1230, 421, 1415, 1271, 1962, 2677, 2373, 2951, 114, 1379, 2015, 2211, 955, 2066, 2573, 2982, 296, 1730, 1591}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.05017297846158086</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>100</pre></td></tr><tr><td><pre>42</pre></td></tr><tr><td><pre>{2750, 2877, 2224, 186, 1398, 1084, 1542, 2770, 2288, 1078, 373, 2417, 476, 2968, 564, 1565, 1740, 1377, 2633, 287,
 111, 823, 578, 520, 1708, 174, 144, 1295, 694, 678, 227, 2588, 371, 2740, 211, 1798, 82, 2385, 2979, 389,
 2031, 1667, 2541, 2561, 1471, 2562, 974, 577, 286, 2836, 120, 2290, 185, 554, 2549, 1410, 1814, 1508, 2559, 1806,
 2215, 1606, 2637, 1394, 1583, 1491, 2908, 529, 2556, 1034, 2770, 750, 2866, 2590, 1156, 2646, 2536, 958, 2862, 2565,
 1027, 2744, 1160, 276, 2080, 322, 92, 790, 2452, 1859, 602, 2935, 2392, 1076, 2991, 1158, 2721, 868, 112, 29}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 0.003026484586204139</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>
